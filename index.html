<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Photography Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        .hero {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('your-background-image.jpg');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
        }

        .gallery {
            padding: 50px 10%;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .gallery img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .gallery img:hover {
            transform: scale(1.05);
        }

        nav {
            position: fixed;
            width: 100%;
            padding: 20px;
            background: rgba(0,0,0,0.8);
            z-index: 10;
        }

        nav a {
            color: white;
            text-decoration: none;
            margin: 0 20px;
        }

        /* Chat widget styles */
        .chat-widget {
            position: fixed;
            right: 20px;
            bottom: 20px;
            z-index: 1000;
            font-family: inherit;
        }

        .chat-toggle {
            background: #0066ff;
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 999px;
            cursor: pointer;
            box-shadow: 0 6px 18px rgba(0,0,0,0.2);
        }

        .chat-panel {
            width: 340px;
            max-width: calc(100vw - 40px);
            height: 480px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            background: #0f172a;
            color: white;
            padding: 12px 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        .chat-messages {
            padding: 12px;
            flex: 1 1 auto;
            overflow-y: auto;
            background: linear-gradient(180deg,#f7f7fb,#fff);
        }

        .chat-message {
            margin: 8px 0;
            padding: 10px 12px;
            border-radius: 10px;
            max-width: 85%;
            line-height: 1.3;
        }

        .chat-message.user {
            background: #e6f0ff;
            align-self: flex-end;
        }

        .chat-message.assistant {
            background: #f1f1f5;
            align-self: flex-start;
        }

        .chat-form {
            display: flex;
            gap: 8px;
            padding: 10px;
            border-top: 1px solid #eee;
            background: white;
        }

        .chat-form input[type="text"] {
            flex: 1 1 auto;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            outline: none;
        }

        .chat-form button[type="submit"] {
            background: #0066ff;
            color: white;
            border: none;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
        }

        @media (max-width: 480px) {
            .chat-panel { height: 60vh; width: 92vw; }
        }
    </style>
</head>
<body>
    <nav>
        <a href="#home">Home</a>
        <a href="#gallery">Gallery</a>
        <a href="#casino">Casino</a>
        <a href="#contact">Contact</a>
    </nav>

    <section class="hero" id="home">
        <div class="hero-content">
            <h1>My Photography</h1>
            <p>Capturing moments that last forever</p>
        </div>
    </section>

    <!-- Casino section: Slot + Blackjack -->
    <section class="casino" id="casino" style="padding:50px 10%;">
        <h2 style="margin-bottom:16px;">Casino Corner</h2>
        <div class="casino-grid" style="display:grid;grid-template-columns:1fr 1fr;gap:20px;align-items:start;">
            <!-- Slot Machine -->
            <div class="slot" style="background:#fff;padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.08);">
                <h3>Slot Machine</h3>
                <div class="slot-reels" style="display:flex;gap:8px;justify-content:center;margin:12px 0;font-size:40px;">
                    <div id="reel1">üçí</div>
                    <div id="reel2">üçã</div>
                    <div id="reel3">üîî</div>
                </div>
                <div style="display:flex;gap:8px;align-items:center;justify-content:center;margin-bottom:12px;">
                    <button id="spinBtn" style="padding:8px 12px;border-radius:8px;background:#0066ff;color:#fff;border:none;cursor:pointer;">Spin</button>
                    <div id="slotResult" style="min-width:140px;text-align:center;font-weight:600;">Good luck!</div>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;">
                    <div>Credits: <span id="slotCredits">100</span></div>
                    <div>Bet: <input id="slotBet" type="number" value="5" min="1" style="width:60px;padding:4px;border-radius:6px;border:1px solid #ddd;"/></div>
                </div>
            </div>

            <!-- Blackjack -->
            <div class="blackjack" style="background:#fff;padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.08);">
                <h3>Blackjack (Single-player)</h3>
                <div style="margin-bottom:8px;">Credits: <span id="bjCredits">100</span> | Bet: <input id="bjBet" type="number" value="10" min="1" style="width:80px;padding:4px;border-radius:6px;border:1px solid #ddd;"/></div>
                <div style="display:flex;gap:12px;">
                    <div style="flex:1">
                        <div style="font-weight:700">Dealer</div>
                        <div id="dealerCards" style="min-height:40px;margin:6px 0"></div>
                        <div id="dealerScore"></div>
                    </div>
                    <div style="flex:1">
                        <div style="font-weight:700">Player</div>
                        <div id="playerCards" style="min-height:40px;margin:6px 0"></div>
                        <div id="playerScore"></div>
                    </div>
                </div>
                <div style="margin-top:10px;display:flex;gap:8px;">
                    <button id="bjDeal" style="padding:8px;border-radius:8px;background:#06b; color:#fff;border:none;cursor:pointer;">Deal</button>
                    <button id="bjHit" style="padding:8px;border-radius:8px;background:#0a0;color:#fff;border:none;cursor:pointer;" disabled>Hit</button>
                    <button id="bjStand" style="padding:8px;border-radius:8px;background:#a60;color:#fff;border:none;cursor:pointer;" disabled>Stand</button>
                    <div id="bjMessage" style="margin-left:8px;font-weight:600;align-self:center"></div>
                </div>
            </div>
        </div>
    </section>

    <section class="gallery" id="gallery">
        <!-- Replace src with your image paths -->
        <img src="image1.jpg" alt="Photo 1">
        <img src="image2.jpg" alt="Photo 2">
        <img src="image3.jpg" alt="Photo 3">
        <img src="image4.jpg" alt="Photo 4">
        <img src="image5.jpg" alt="Photo 5">
        <img src="image6.jpg" alt="Photo 6">
    </section>

    <!-- Chat widget -->
    <div class="chat-widget" id="chatWidget">
        <button class="chat-toggle" id="chatToggle" aria-label="Open chat">Chat</button>
        <div class="chat-panel" id="chatPanel" hidden>
            <div class="chat-header">
                <span>Chat with ChatGPT</span>
                <button id="chatClose" aria-label="Close" style="background:none;border:none;color:white;font-size:20px;cursor:pointer">√ó</button>
            </div>
            <div class="chat-messages" id="chatMessages" role="log" aria-live="polite"></div>
            <form id="chatForm" class="chat-form">
                <input id="chatInput" type="text" placeholder="Say hi to ChatGPT..." autocomplete="off" />
                <button type="submit">Send</button>
            </form>
        </div>
    </div>

    <script>
    (function(){
        const chatToggle = document.getElementById('chatToggle');
        const chatPanel = document.getElementById('chatPanel');
        const chatClose = document.getElementById('chatClose');
        const chatForm = document.getElementById('chatForm');
        const chatInput = document.getElementById('chatInput');
        const chatMessages = document.getElementById('chatMessages');

                function appendMessage(role, text) {
            const msg = document.createElement('div');
            msg.className = 'chat-message ' + role;
            msg.textContent = text;
            chatMessages.appendChild(msg);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return msg;
        }

                // Client-side mock responses (same idea as server-side mock)
                const mockResponses = [
                    "Hi! I love talking about photography ‚Äî what kind of photos do you like?",
                    "Natural light can make portraits feel more alive. Try shooting near a window.",
                    "Golden hour (shortly after sunrise or before sunset) is perfect for warm, soft light.",
                    "For crisp landscapes, use a small aperture like f/8 to f/16.",
                    "Try a low ISO and a tripod for long exposure shots at night.",
                    "I recommend shooting in RAW if you plan to edit heavily later.",
                    "Experiment with different angles ‚Äî sometimes the best shot is from the ground.",
                    "Rule of thirds is a great starting composition guideline, but break it when it helps.",
                    "Use a reflector to fill shadows when shooting faces outdoors.",
                    "If you want creamy background blur, use a wide aperture (small f-number).",
                    "For action shots, prioritize shutter speed over aperture to freeze motion.",
                    "Try backlighting to get a rim light effect ‚Äî expose for the subject, not the sky.",
                    "Use manual white balance when mixed lighting throws off your colors.",
                    "A polarizing filter helps reduce reflections and deepen skies.",
                    "Practice makes perfect ‚Äî shoot every day, even quick studies on your phone.",
                    "If you want to sell prints, consider offering square and landscape crops.",
                    "Storytelling matters: think about the emotion you want the image to convey.",
                    "Minimalist compositions often work well for galleries and social media.",
                    "Try a 50mm prime lens for versatile portraits with pleasing perspective.",
                    "Capture candid moments by blending into the scene and using a longer lens.",
                    "For product photos, use soft, even lighting and a clean background.",
                    "When editing, subtle adjustments usually read as more professional than heavy filters.",
                    "Consider tethered shooting for studio sessions ‚Äî it speeds feedback and selection.",
                    "Local contrast and clarity can bring out texture in landscape photos.",
                    "Bring spare batteries and memory cards on long shoots ‚Äî they always help.",
                    "Try shooting in burst mode for unpredictable movement and pick the best frame.",
                    "Use leading lines to guide the viewer's eye through your composition.",
                    "If you're starting out, focus on mastering exposure before advanced techniques.",
                    "Learn basic color theory ‚Äî complementary colors often create strong visuals.",
                    "When photographing people, chat with them ‚Äî relaxed subjects look better.",
                    "Macro photography reveals textures you wouldn't notice at first glance.",
                    "Try black & white conversions to emphasize shape and emotion.",
                    "For architecture, correct perspective distortion in post if needed.",
                    "Create a portfolio of 10‚Äì20 strong images rather than many average ones.",
                    "Offer limited edition prints to create exclusivity for collectors.",
                    "If you're unsure how to price work, research local photographers with similar style.",
                    "Use social media to share behind-the-scenes content; clients love that.",
                    "Back up your photos in at least two separate places (cloud + local).",
                    "Don't be afraid to crop tightly to remove distractions and focus the subject.",
                    "Try intentional camera movement for creative abstract effects.",
                    "If you want, I can help suggest camera settings for a specific scene ‚Äî tell me the camera and lighting.",
                    "Want a random photography tip or a set of editing presets? I can provide more."
                ];

                function chooseMockReply(message) {
                    if (!message) return mockResponses[0];
                    const m = message.toLowerCase();
                    const pricingKeywords = ['price', 'cost', 'rate', 'charge', 'pricing'];
                    const bookingKeywords = ['book', 'available', 'availability', 'schedule', 'date'];
                    const lightingKeywords = ['light', 'lighting', 'golden', 'sunset', 'sunrise', 'flash'];
                    const equipmentKeywords = ['lens', 'camera', 'tripod', 'filter', 'iso', 'aperture', 'shutter'];

                    if (pricingKeywords.some(k => m.includes(k))) {
                        const options = [
                            "Pricing varies by session length and usage ‚Äî tell me what you need and I can suggest a package.",
                            "I offer portrait sessions, event coverage, and print packages. Which are you interested in?",
                            "For most portraits, a basic session starts with a licence for personal use; commercial pricing is different."
                        ];
                        return options[Math.floor(Math.random() * options.length)];
                    }

                    if (bookingKeywords.some(k => m.includes(k))) {
                        const options = [
                            "I usually book 2‚Äì4 weeks in advance; let me know the date and I'll check availability.",
                            "Send me the preferred date and type of session (portrait, event, product) and I'll confirm availability.",
                            "I can hold a tentative slot for 48 hours if you need time to confirm."
                        ];
                        return options[Math.floor(Math.random() * options.length)];
                    }

                    if (lightingKeywords.some(k => m.includes(k))) {
                        const options = [
                            "Softer light is usually better for portraits ‚Äî try shooting in shade or during golden hour.",
                            "Use a diffuser for harsh midday sun or seek open shade for even light.",
                            "If you're indoors, position subjects facing a large window for flattering natural light."
                        ];
                        return options[Math.floor(Math.random() * options.length)];
                    }

                    if (equipmentKeywords.some(k => m.includes(k))) {
                        const options = [
                            "A 50mm prime is a great all-around lens for portraits and low-light shooting.",
                            "A sturdy tripod makes long exposures and landscapes much easier to nail.",
                            "If you want background blur, use a lens with a wide maximum aperture (f/1.8, f/1.4)."
                        ];
                        return options[Math.floor(Math.random() * options.length)];
                    }

                    return mockResponses[Math.floor(Math.random() * mockResponses.length)];
                }

        chatToggle.addEventListener('click', () => {
            chatPanel.hidden = false;
            chatToggle.style.display = 'none';
            chatInput.focus();
        });

        chatClose.addEventListener('click', () => {
            chatPanel.hidden = true;
            chatToggle.style.display = 'inline-block';
        });

        chatForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const text = chatInput.value.trim();
            if (!text) return;
            appendMessage('user', text);
            chatInput.value = '';
            const thinking = appendMessage('assistant', 'Thinking...');

            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: text })
                });
                const data = await res.json().catch(() => null);

                if (res.ok && data) {
                    // Support both simple {reply: '...'} and OpenAI-like structures
                    if (data.reply) {
                        thinking.textContent = data.reply;
                    } else if (data.choices && data.choices[0] && data.choices[0].message) {
                        thinking.textContent = data.choices[0].message.content;
                    } else {
                        thinking.textContent = 'No reply from server.';
                    }
                } else {
                    thinking.textContent = 'Server returned an error.';
                    console.error('Chat error', res.status, data);
                    // Fallback to client-side mock reply
                    const fallback = chooseMockReply(text);
                    thinking.textContent = fallback + ' (mock)';
                }
            } catch (err) {
                console.error(err);
                // Network or server unreachable ‚Äî use client-side mock reply
                const fallback = chooseMockReply(text);
                thinking.textContent = fallback + ' (mock)';
            }
        });

        // Small UX: show a starter hint when opening first time
        chatToggle.addEventListener('dblclick', () => {
            if (chatPanel.hidden) {
                chatPanel.hidden = false;
                chatToggle.style.display = 'none';
                appendMessage('assistant', 'Tip: This demo expects a POST /api/chat endpoint. If not available you will see a fallback.');
            }
        });

        // ----------------- Casino games logic -----------------
        // Slot machine
        (function(){
            const symbols = ['üçí','üçã','üîî','‚≠ê','7Ô∏è‚É£','üíé'];
            const reel1 = document.getElementById('reel1');
            const reel2 = document.getElementById('reel2');
            const reel3 = document.getElementById('reel3');
            const spinBtn = document.getElementById('spinBtn');
            const slotResult = document.getElementById('slotResult');
            const slotCredits = document.getElementById('slotCredits');
            const slotBet = document.getElementById('slotBet');

            function randSymbol(){ return symbols[Math.floor(Math.random()*symbols.length)]; }

            function updateCredits(delta){
                slotCredits.textContent = Math.max(0, parseInt(slotCredits.textContent || '0') + delta);
            }

            let spinning = false;
            spinBtn.addEventListener('click', () => {
                if (spinning) return;
                const bet = Math.max(1, Math.floor(Number(slotBet.value) || 1));
                if (parseInt(slotCredits.textContent) < bet) {
                    slotResult.textContent = 'Not enough credits';
                    return;
                }
                updateCredits(-bet);
                spinning = true;
                slotResult.textContent = 'Spinning...';
                const intervals = [50,60,70,90,120,180,260];
                const final = [randSymbol(), randSymbol(), randSymbol()];
                let i = 0;
                const ints = symbols.map(() => null);
                // animate each reel with staggered stop
                function spinReel(reel, idx, stopAfter){
                    let ticks = 0;
                    ints[idx] = setInterval(()=>{
                        reel.textContent = randSymbol();
                        ticks++;
                        if (ticks > stopAfter){
                            clearInterval(ints[idx]);
                            reel.textContent = final[idx];
                            // when all stopped, evaluate
                            if (ints.every(v=>v===null || v===undefined)) {
                                evaluate(final, bet);
                                spinning = false;
                            }
                        }
                    }, 60 + idx*30);
                }

                spinReel(reel1,0,10 + Math.floor(Math.random()*6));
                spinReel(reel2,1,14 + Math.floor(Math.random()*8));
                spinReel(reel3,2,18 + Math.floor(Math.random()*10));
            });

            function evaluate(final, bet){
                const [a,b,c] = final;
                if (a===b && b===c){
                    // three of a kind
                    const win = bet * 10;
                    updateCredits(win);
                    slotResult.textContent = `JACKPOT! +${win}`;
                } else if (a===b || b===c || a===c){
                    const win = bet * 2;
                    updateCredits(win);
                    slotResult.textContent = `Nice! +${win}`;
                } else {
                    slotResult.textContent = 'No luck ‚Äî try again!';
                }
            }
        })();

        // Blackjack (very small/simple implementation)
        (function(){
            const bjCredits = document.getElementById('bjCredits');
            const bjBet = document.getElementById('bjBet');
            const dealerCards = document.getElementById('dealerCards');
            const playerCards = document.getElementById('playerCards');
            const dealerScore = document.getElementById('dealerScore');
            const playerScore = document.getElementById('playerScore');
            const bjDeal = document.getElementById('bjDeal');
            const bjHit = document.getElementById('bjHit');
            const bjStand = document.getElementById('bjStand');
            const bjMessage = document.getElementById('bjMessage');

            function createDeck(){
                const suits = ['‚ô†','‚ô•','‚ô¶','‚ô£'];
                const ranks = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
                const deck = [];
                suits.forEach(s=>ranks.forEach(r=>deck.push(r+s)));
                return deck;
            }

            function shuffle(a){
                for(let i=a.length-1;i>0;i--){
                    const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];
                }
            }

            function cardValue(card){
                const r = card.slice(0, -1);
                if (r==='A') return 11;
                if (['K','Q','J'].includes(r)) return 10;
                return Number(r);
            }

            function scoreHand(hand){
                let sum=0;let aces=0;
                hand.forEach(c=>{const v=cardValue(c);sum+=v;if (c.startsWith('A')) aces++;});
                while(sum>21 && aces>0){sum-=10;aces--;}
                return sum;
            }

            let deck=[], playerHand=[], dealerHand=[], inRound=false;

            function resetDisplay(){
                dealerCards.textContent='';playerCards.textContent='';dealerScore.textContent='';playerScore.textContent='';bjMessage.textContent='';
            }

            function renderHands(hideDealerSecond){
                dealerCards.textContent='';dealerHand.forEach((c,i)=>{
                    const span=document.createElement('span');span.textContent = (i===1 && hideDealerSecond)?'üÇ†':c;span.style.marginRight='6px';dealerCards.appendChild(span);
                });
                playerCards.textContent='';playerHand.forEach(c=>{const span=document.createElement('span');span.textContent=c;span.style.marginRight='6px';playerCards.appendChild(span);});
                playerScore.textContent = `Score: ${scoreHand(playerHand)}`;
                if (!hideDealerSecond) dealerScore.textContent = `Score: ${scoreHand(dealerHand)}`; else dealerScore.textContent = '';
            }

            function endRound(msg, payout){
                inRound=false;bjHit.disabled=true;bjStand.disabled=true;bjDeal.disabled=false; if(payout) bjCredits.textContent = Math.max(0, parseInt(bjCredits.textContent||'0')+payout); bjMessage.textContent = msg;
            }

            bjDeal.addEventListener('click', ()=>{
                const bet = Math.max(1, Math.floor(Number(bjBet.value)||1));
                if (parseInt(bjCredits.textContent) < bet){ bjMessage.textContent='Not enough credits'; return; }
                // init
                deck = createDeck(); shuffle(deck);
                playerHand = [deck.pop(), deck.pop()];
                dealerHand = [deck.pop(), deck.pop()];
                inRound=true; bjDeal.disabled=true; bjHit.disabled=false; bjStand.disabled=false; bjMessage.textContent='';
                bjCredits.textContent = parseInt(bjCredits.textContent) - bet;
                renderHands(true);
                // check blackjack
                const pScore = scoreHand(playerHand); const dScore = scoreHand(dealerHand);
                if (pScore===21){
                    // instant win unless dealer has blackjack
                    if (dScore===21) endRound('Push (both blackjack)', bet);
                    else endRound('Blackjack! You win 1.5x', Math.floor(bet*2.5));
                }
            });

            bjHit.addEventListener('click', ()=>{
                if (!inRound) return;
                playerHand.push(deck.pop()); renderHands(true);
                const s = scoreHand(playerHand);
                if (s>21){ endRound('Busted! You lose.', 0); }
            });

            bjStand.addEventListener('click', ()=>{
                if (!inRound) return;
                // dealer plays
                renderHands(false);
                while(scoreHand(dealerHand) < 17){ dealerHand.push(deck.pop()); }
                renderHands(false);
                const p = scoreHand(playerHand); const d = scoreHand(dealerHand);
                const bet = Math.max(1, Math.floor(Number(bjBet.value)||1));
                if (d>21 || p> d){ endRound('You win!', bet*2); }
                else if (p===d){ endRound('Push (tie)', bet); }
                else { endRound('Dealer wins', 0); }
            });

            // new page load: ensure buttons correct
            resetDisplay();
        })();
    })();
    </script>
</body>
</html>